<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <style>
      #map-container {
        display: flex;
      }

      #map {
        width: 500px;
        height: 400px;
      }

      #locations {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 18px;
      }

      .location {
        margin-bottom: 10px;
        cursor: pointer;
      }
    </style>
    <script src="js/bootstrap.min.js"></script>
  </head>

  <header class="p-3 mb-2 bg-primary text-white">철수미용실</header>

  <body>
    <div class="container text-center">
      <div class="row">
        <div class="col">로그인</div>
        <div class="col">예약하기</div>
        <div class="col">내예약확인</div>
      </div>
    </div>

    <h3>미용실 위치</h3>

    <div id="map-container">
      <div id="map"></div>
      <div id="locations">
        <div class="location" data-lat="33.450701" data-lng="126.570667">
          철수미용실
        </div>
        <div class="location" data-lat="33.450701" data-lng="126.580667">
          지점1
        </div>
        <div class="location" data-lat="33.460701" data-lng="126.570667">
          지점2
        </div>
        <div class="location" data-lat="33.460701" data-lng="126.580667">
          지점3
        </div>
      </div>
    </div>

    <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d61d24f5601fbf11f4eb68a9a8109e3d"
    ></script>

    <script>
      var container = document.getElementById("map");
      var options = {
        center: new kakao.maps.LatLng(33.450701, 126.570667),
        level: 3,
      };

      var map = new kakao.maps.Map(container, options);
      var markers = [];

      // 4개의 지점 좌표
      var locations = [
        {
          title: "철수미용실",
          lat: 33.450701,
          lng: 126.570667,
        },
        {
          title: "지점1",
          lat: 33.450701,
          lng: 126.580667,
        },
        {
          title: "지점2",
          lat: 33.460701,
          lng: 126.570667,
        },
        {
          title: "지점3",
          lat: 33.460701,
          lng: 126.580667,
        },
      ];

      // 4개의 지점에 마커 추가
      for (var i = 0; i < locations.length; i++) {
        var marker = new kakao.maps.Marker({
          map: map,
          position: new kakao.maps.LatLng(locations[i].lat, locations[i].lng),
          title: locations[i].title,
        });

        markers.push(marker);

        kakao.maps.event.addListener(
          marker,
          "mouseover",
          makeOverListener(map, marker, locations[i].title)
        );
        kakao.maps.event.addListener(
          marker,
          "mouseout",
          makeOutListener(marker)
        );
      }

      // 지점명 클릭 이벤트 처리
      var locationElements = document.querySelectorAll(".location");
      locationElements.forEach(function (element, index) {
        element.addEventListener("click", function () {
          var marker = markers[index];
          map.setCenter(marker.getPosition());
          kakao.maps.event.trigger(marker, "mouseover");
        });
      });

      function makeOverListener(map, marker, title) {
        return function () {
          var content = '<div style="padding:10px;">' + title + "</div>";
          var infowindow = new kakao.maps.InfoWindow({
            content: content,
            removable: true,
          });
          infowindow.open(map, marker);
          marker.setZIndex(9999);
          marker.setTitle(marker.getTitle() + " (클릭하여 확대)");
          marker.setAnimation(kakao.maps.Animation.BOUNCE);
        };
      }

      function makeOutListener(marker) {
        return function () {
          var title = marker.getTitle().split(" (")[0];
          marker.setZIndex(0);
          marker.setTitle(title);
          marker.setAnimation(null);
        };
      }
    </script>

    <footer class="p-3 mb-2 bg-primary text-white">푸터</footer>
  </body>
</html>
